<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Automating data entry • tidyged.utils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Automating data entry">
<meta property="og:description" content="tidyged.utils">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyged.utils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/automation.html">Automating data entry</a>
    </li>
    <li>
      <a href="../articles/merging_splitting.html">Splitting and Merging GEDCOM files</a>
    </li>
    <li>
      <a href="../articles/organising.html">Organisation functions</a>
    </li>
    <li>
      <a href="../articles/redaction.html">Redaction of sensitive data</a>
    </li>
    <li>
      <a href="../articles/reducing_bloat.html">Reducing file bloat</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jl5000/tidyged.utils/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="automation_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Automating data entry</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jl5000/tidyged.utils/blob/master/vignettes/automation.Rmd"><code>vignettes/automation.Rmd</code></a></small>
      <div class="hidden name"><code>automation.Rmd</code></div>

    </div>

    
    
<div id="inserting-explicit-death-subrecords" class="section level2">
<h2 class="hasAnchor">
<a href="#inserting-explicit-death-subrecords" class="anchor"></a>Inserting explicit death subrecords</h2>
<p>Sometimes individuals are defined with a date of birth but no death subrecord because there is no information about the death to warrant creating one. However, including an empty death subrecord is valuable in its own right to indicate the individual is dead. The <code><a href="../reference/insert_explicit_death_subrecords.html">insert_explicit_death_subrecords()</a></code> function allows you to automatically insert these subrecords for individuals who would be too old to still be alive.</p>
<p>We illustrate with the following example of five individuals with various dates of birth (including a missing birth subrecord for person 5):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jl5000.github.io/tidyged/">tidyged</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jl5000/tidyged.utils">tidyged.utils</a></span><span class="op">)</span>

<span class="va">people</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/gedcom.html">gedcom</a></span><span class="op">(</span><span class="fu"><a href="https://jl5000.github.io/tidyged/reference/subm.html">subm</a></span><span class="op">(</span><span class="st">"Me"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi.html">add_indi</a></span><span class="op">(</span>qn <span class="op">=</span> <span class="st">"Person 1"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi_fact.html">add_indi_fact</a></span><span class="op">(</span><span class="st">"birth"</span>, date <span class="op">=</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/date_calendar.html">date_calendar</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi.html">add_indi</a></span><span class="op">(</span>qn <span class="op">=</span> <span class="st">"Person 2"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi_fact.html">add_indi_fact</a></span><span class="op">(</span><span class="st">"birth"</span>, date <span class="op">=</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/date_calendar.html">date_calendar</a></span><span class="op">(</span><span class="fl">1888</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi.html">add_indi</a></span><span class="op">(</span>qn <span class="op">=</span> <span class="st">"Person 3"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi_fact.html">add_indi_fact</a></span><span class="op">(</span><span class="st">"birth"</span>, date <span class="op">=</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/date_calendar.html">date_calendar</a></span><span class="op">(</span><span class="fl">1885</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi.html">add_indi</a></span><span class="op">(</span>qn <span class="op">=</span> <span class="st">"Person 4"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi_fact.html">add_indi_fact</a></span><span class="op">(</span><span class="st">"birth"</span>, date <span class="op">=</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/date_calendar.html">date_calendar</a></span><span class="op">(</span><span class="fl">1910</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi.html">add_indi</a></span><span class="op">(</span>qn <span class="op">=</span> <span class="st">"Person 5"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/add_indi_fact.html">add_indi_fact</a></span><span class="op">(</span><span class="st">"census"</span>, date <span class="op">=</span> <span class="fu"><a href="https://jl5000.github.io/tidyged/reference/date_calendar.html">date_calendar</a></span><span class="op">(</span><span class="fl">1911</span><span class="op">)</span>, age <span class="op">=</span> <span class="st">"42y"</span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">people</span>, <span class="va">tag</span> <span class="op">==</span> <span class="st">"DEAT"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 0 × 4</span>
<span class="co">#&gt; # … with 4 variables: level &lt;dbl&gt;, record &lt;chr&gt;, tag &lt;chr&gt;, value &lt;chr&gt;</span></code></pre></div>
<p>If we were to assume a maximum age of 120 years (the default for the function) we would want a death subrecord for the first three individuals.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">people_wds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/insert_explicit_death_subrecords.html">insert_explicit_death_subrecords</a></span><span class="op">(</span><span class="va">people</span>, max_age <span class="op">=</span> <span class="fl">120</span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">people_wds</span>, <span class="va">tag</span> <span class="op">==</span> <span class="st">"DEAT"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 4</span>
<span class="co">#&gt;   level record tag   value</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1     1 @I1@   DEAT  Y    </span>
<span class="co">#&gt; 2     1 @I2@   DEAT  Y    </span>
<span class="co">#&gt; 3     1 @I3@   DEAT  Y</span></code></pre></div>
<p>If an individual has no date of birth defined, then the default action is to leave the record as is. However, setting the <code>guess</code> parameter to TRUE will cause the function to guess an age from associated facts if a date of birth does not exist.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">people_wds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/insert_explicit_death_subrecords.html">insert_explicit_death_subrecords</a></span><span class="op">(</span><span class="va">people</span>, max_age <span class="op">=</span> <span class="fl">120</span>, guess <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">people_wds</span>, <span class="va">tag</span> <span class="op">==</span> <span class="st">"DEAT"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 × 4</span>
<span class="co">#&gt;   level record tag   value</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1     1 @I1@   DEAT  Y    </span>
<span class="co">#&gt; 2     1 @I2@   DEAT  Y    </span>
<span class="co">#&gt; 3     1 @I3@   DEAT  Y    </span>
<span class="co">#&gt; 4     1 @I5@   DEAT  Y</span></code></pre></div>
<p>We can now see an additional death subrecord for the fifth individual as the function has guessed the current age of the individual from the census event.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jamie Lendrum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
